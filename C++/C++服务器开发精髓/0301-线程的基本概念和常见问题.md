## 3.1 线程的基本概念和常见问题

一个进程（process）代表计算机中实际的程序。
在现代操作系统的保护下，每个进程都拥有自己独立的进程地址空间和上下文堆栈，但就一个程序本身执行的操作而言，进程其实什么也不做（不执行任何进程代码），只提供一个大的环境容器。
进程中实际执行操作的是线程（thread）。因此在一个进程中至少得有一个线程，我们把这个称为“主线程”。

### 主线程退出，支线程也会退出吗？

在Windows中，如果一个进程存在多个线程，当主线程退出时，其他所有的支线程（或者说：工作线程）即使还没有执行完代码都会退出。
换言之，一旦主线程退出，整个进程就结束了。

开发时要注意如何避免主线程在工作线程的逻辑未执行前退出。解决方案：
1. 主线程一直循环等待工作线程完成业务逻辑的执行
2. 主线程等到所有工作线程退出才退出

在Linux中，如果主线程退出，支线程一般不会退出，还会继续运行，但此时这个进程就会变成僵尸进程，开发时应避免产生僵尸进程。

使用```ps -ef```查看系统进程
带有```<defunct>```的即为僵尸进程。

**注意**：
在某些Linux发行版本中，是和Windows一样，主线程退出，支线程都会退出。

### 某个线程崩溃，会导致进程退出吗？

还有另外一种问法：
进程中的某个线程崩溃，会影响其他线程吗？

线程与线程之间时相互独立的，一个线程崩溃不会影响到其他线程。
但是一般线程崩溃后，会导致操作系统让整个进程退出，这样该进程下的其他进程都会被释放
