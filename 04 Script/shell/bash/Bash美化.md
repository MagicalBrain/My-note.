# Bash美化

由于经常在windows使用 git bash 所以希望能够在 linux上也能够获得类似的体验

## 查找并分析默认设置

通过在git bash中查看设置:

```bash
vim ~/.bash_bashrc
```

```bash
export PS1='\[\e]0;\w\a\]\n\[\e[32m\]\u@\h \[\e[35m\]$MSYSTEM\[\e[0m\] \[\e[33m\]\w\[\e[0m\]\n'"${_ps1_symbol}"' '
```

分析：

好的，下面我来详细分析你提供的 bash PS1 设置：

```bash
export PS1='\[\e]0;\w\a\]\n\[\e[32m\]\u@\h \[\e[35m\]$MSYSTEM\[\e[0m\] \[\e[33m\]\w\[\e[0m\]\n'"${_ps1_symbol}"' '
```

---

### 1. 结构分解

- `\[\e]0;\w\a\]`  
  设置终端窗口标题为当前路径（`\w`），`\e]0;` 开始设置标题，`\a` 结束。

- `\n`  
  换行。每次提示符前先换一行。

- `\[\e[32m\]\u@\h`  
  绿色显示用户名@主机名。  
  - `\e[32m`：绿色
  - `\u`：用户名
  - `\h`：主机名

- `\[\e[35m\]$MSYSTEM\[\e[0m\]`  
  紫色显示 `$MSYSTEM` 变量（如 MINGW64），然后重置颜色。  
  - `\e[35m`：紫色
  - `$MSYSTEM`：MSYS2 或 Git Bash 下的系统类型变量
  - `\e[0m`：重置颜色

- `\[\e[33m\]\w\[\e[0m\]`  
  黄色显示当前路径（`\w`），然后重置颜色。  
  - `\e[33m`：黄色
  - `\w`：当前工作目录

- `\n`  
  再换一行

- `"${_ps1_symbol}"`  
  显示自定义的提示符符号（比如 `$` 或 `λ`），这个变量需要你自己提前定义。

- 末尾的空格  
  让输入命令时有个间隔，更美观。

---

### 2. 视觉效果

最终效果大致如下（假设 _ps1_symbol 是 `$`）：

```
（窗口标题：/当前路径）
用户名@主机名 MSYSTEM 当前路径
$
```
并且各部分有不同颜色。

---

### 3. 适用场景

- 适用于 MSYS2、Git Bash 等支持 `$MSYSTEM` 变量的环境
- 适合喜欢分行、彩色、带有系统类型和路径提示的用户
- 需要提前定义 `_ps1_symbol` 变量，例如：
  ```bash
  _ps1_symbol='$'
  ```

---

### 4. 总结

- 该 PS1 让提示符分两行，信息丰富且彩色美观
- 兼容 Git Bash/MSYS2，能显示 MSYSTEM
- 需要自定义 `_ps1_symbol`
- 终端标题会自动变为当前路径

如需进一步定制或有其他需求，欢迎继续提问！

## bash示例PS1分析

当然可以，下面详细分析你提供的 bash PS1 设置：

```bash
export PS1='\[\033[01;32m\]\u@\h:\w\[\033[01;36m\]$(parse_git_branch)\[\033[00m\] \$'
```

---

### 1. 结构分解

- `\[\033[01;32m\]`  
  设置颜色为**亮绿色**（01;32），用于后面显示的内容。

- `\u@\h:`  
  `\u`：用户名  
  `@`：分隔符  
  `\h`：主机名  
  `:`：分隔符  
  这部分会以亮绿色显示。

- `\w`  
  当前工作目录（路径），同样以亮绿色显示。

- `\[\033[01;36m\]`  
  设置颜色为**亮青色**（01;36），用于后面显示的内容。

- `$(parse_git_branch)`  
  这是一个命令替换，显示由 `parse_git_branch` 函数返回的内容。  
  通常这个函数会返回当前 git 分支名（如 `(main)`），只有在 git 仓库目录下才会显示。

- `\[\033[00m\]`  
  重置颜色，防止后续命令行输出受到影响。

- ` \$`  
  显示提示符符号（普通用户是 `$`，root 用户是 `#`），前面有个空格。

---

### 2. 视觉效果

假设你在 git 仓库的 `main` 分支，效果如下（带颜色）：

```
用户名@主机名:当前路径 (main) $
```
- 用户名@主机名:当前路径 —— 亮绿色
- (main) —— 亮青色
- `$` —— 默认颜色

---

### 3. 依赖说明

- 需要你在 `~/.bashrc` 或其他地方定义 `parse_git_branch` 函数，例如：

  ```bash
  parse_git_branch() {
    git branch 2>/dev/null | grep '^*' | colrm 1 2 | awk '{print "("$1")"}'
  }
  ```

  这样 `$(parse_git_branch)` 才能正确显示分支名。

---

### 4. 总结

- 该 PS1 让提示符简洁美观，分颜色显示用户、主机、路径和 git 分支
- 适合开发者，能直观看到当前 git 分支
- 需要自定义 `parse_git_branch` 函数

如需进一步美化或有其他需求，欢迎继续提问！


## 修改

```bash
export PS1='\[\e]0;\w\a\]\n\[\e[32m\]\u@\h \[\e[35m\]$MSYSTEM\[\e[0m\] \[\e[33m\]\w\[\e[0m\]\n'"${_ps1_symbol}"' '
```

原来：

```bash
export PS1='\[\033[01;32m\]\u@\h:\w\[\033[01;36m\]$(parse_git_branch)\[\033[00m\] \$'
```

修改成：

```bash
export PS1='\[\e]0;\w\a\]\n\[\e[32m\]\u@\h \[\e[33m\]\w \[\033[01;36m\]$(parse_git_branch)\[\033[00m\]\$\[\e[0m\]'
```