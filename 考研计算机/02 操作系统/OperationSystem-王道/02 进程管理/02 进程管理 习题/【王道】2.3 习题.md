# 2.3 进程管理

## 选择题

#### 10、以下属于临界资源的是？

A、磁盘存储介质
B、公用队列
C、私用数据
D、可重入的程序代码

<details>
<summary>点击查看答案与解析</summary>

正解：B
解析：
临界资源与共享设备的区别是在一段时间内能够被多个进程访问（并发使用）。
磁盘属于共享资源，A错；
私用数据仅供一个进程使用，不存在临界问题，C错；
可重入的程序代码一次可以供多个进程使用，不存在临界问题，D错

公用队列：可供多个进程使用，但一次仅供一个进程使用，故选B
</details>

#### 11、在操作系统中，要对并发进程进行同步的原因是？

A、进程必须在有限的时间内完成
B、进程具有动态性
C、并发进程是异步的
D、进程具有结构性

<details>
<summary>点击查看答案与解析</summary>

正解：C
解析：
进程同步是指进程之间一种直接的协同工作关系，这些进程的并发是异步的，它们相互合作共同完成一项任务。
</details>

#### 18、在用信号量机制实现互斥是，互斥信号量的初值为？

A、0
B、1
C、2
D、3

<details>
<summary>点击查看答案与解析</summary>

正解：B
解析：
互斥信号量初值为1。
因为互斥的话，那么一次只有一个进程能够获得服务，初始情况下，没有进程进入，初值自然为1。
</details>

#### 20、可以被多个进程在任意时刻共享的代码必须是？

A、顺序代码
B、机器语言代码
C、不允许任何修改的代码
D、无转移指令代码

<details>
<summary>点击查看答案与解析</summary>

正解：C
解析：
若代码可以在任意时刻共享，那么就要求该代码被任意进程调用后都已同样的方式运行，那么代码就是不可修改的，故选C
</details>

#### 29、以下关于管程的叙述中，错误的是？

A、管程是进程同步的工具，解决信号量机制大量同步操作分散的问题
B、管程每次只允许一个进程进入管程
C、管程中signal操作的作用和信号量中V操作相同
D、管程是被进程调用的，管程是语法范围，无法创建和撤销

<details>
<summary>点击查看答案与解析</summary>

正解：C
解析：
管程中signal操作的作用和信号量中V操作不同，信号量机制中的V操作一定会改变信号量的值S+=1，而管程中的signal操作是针对某个条件变量的，若不存在因该条件而阻塞的进程，则signal不会产生任何影响。
</details>

#### 30、下列关于管程的叙述中，错误的是？

A、管程只能用于实现进程的互斥
B、管程是由编程语言支持的进程同步机制
C、任何时候都只能有一个进程在管程中执行
D、管程中定义的变量只能被管程内的过程访问

<details>
<summary>点击查看答案与解析</summary>

正解：A
解析：
管程不仅能实现进程的互斥还可以实现进程的同步，A错
</details>

#### 31、对信号量S执行P操作后，是该进程进入资源等待队列的条件是？

A、S.value < 0
B、S.value<=0
C、S.value>0
D、S.value>=0

<details>
<summary>点击查看答案与解析</summary>

正解：A
解析：
每次P操作就意味着请求分配下一个单位的资源
S.value>0：表示某类可用资源的数量
S.value=0：表示某类资源已经没有；
S.value<0：还有因请求该资源而陷入阻塞的进程，其值即为阻塞的进程数

**注意**：要分清是P操作前还是P操作后，P操作前还得+1
</details>

#### 32、若系统有n个进程，则就绪队列中进程的个数最多有（ ）个；阻塞队列中进程的个数最多有（ ）个

A、n+1
B、n
C、n-1
D、1

<details>
<summary>点击查看答案与解析</summary>

正解：C、B
解析：
1）系统中有n个进程，那么至少有一个在执行，其他的全部为就绪，则最多为n-1；
2）由于可能陷入死锁，所有的进程都进入阻塞态，故阻塞队列中的进程最多为n个
</details>

#### 33、下列关于PV操作的说法中，正确的是？

1. PV操作是一种系统调用命令
2. PV操作是一种低级进程通信原语
3. PV操作是由一个不可被中断的过程组成
4. PV操作是由两个不可被中断的过程组成

A、1，3
B、2，4
C、1，2，4
D、1，4

<details>
<summary>点击查看答案与解析</summary>

正解：B
解析：
PV操作是一种低级通信原语，不是系统操作，1错，2对
PV是两个不可被中断的过程，3错，4对
故选B
</details>

#### 37、进程P0和进程P1的共享变量定义及其初值为：
```c
boolean flag[2];
int turn = 0;
flag[0]=false;flag[1]=false;
```
访问临界资源的类C代码实现为：
```c
void P0()
{
    while(true)
    {
        flag[0]=true;
        turn=1;
        while(flag[1]&&(turn==1));

        //临界区：
        flag[0]=false;
    }
}

void P1()
{
    while(true)
    {
        flag[1]=true;
        turn=0;
        while(flag[0]&&(turn==0));

        //临界区：
        flag[1]=false;
    }
}
```
则并发执行进程P0和进程P1时产生的情况是？

A、不能保证进程互斥进入临界区，会出现“饥饿”现象
B、不能保证进程互斥进入临界区，不会出现“饥饿”现象
C、能保证进程互斥进入临界区，会出现“饥饿”现象
D、能保证进程互斥进入临界区，不会出现“饥饿”现象

<details>
<summary>点击查看答案与解析</summary>

正解：D
解析：
这是peterson算法的实际实现
</details>

#### 38、进程P1和P2均包含并发执行的线程，部分伪代码描述如下：

```c
//P1
int x = 0;
Thread1()
{
    int a;
    a=1;
    x+=1;
}

Thread2()
{
    int a;
    a=2;
    x+=2;
}
```
---
```
//P2
int x = 0;

Thread3()
{
    int a;
    a=x;
    x+=3;
}
Thread4()
{
    int b;
    b=x;
    x+=4;
}
```
下列选项中，需要互斥执行的操作是？

A、a=1;  与a=2;
B、a=x;  与b=x;
C、x+=1; 与x+=2;
D、x+=1; 与x+=3;

<details>
<summary>点击查看答案与解析</summary>

    正解：C
    解析：
    主要是判断两个操作执行的先后是否影响最终的结果（是否会出现不同的结果）
    A，无影响
    B，只是把x的值分别给了a和b，无影响
    D，由于是在两个进程中，而变量x在两个进程一开始就置为0，故无影响

    C，由于这两个操作是在同一个进程，所以x不会每次操作前都置为0，所以这两个操作的先后顺序会影响结果。
</details>


#### 40、使用TSL（Test and Set Lock）指令实现进程互斥的伪代码为：

```c
do
{
    while(TSL(&lock));
    //临界区
    lock=FALSE;
} while(true);
```
下列与该实现机制相关的描述中，正确的是？

A、退出临界区的进程负责唤醒阻塞态进程
B、等待进入临界区的进程不会主动放弃CPU
C、上述伪代码满足“让权等待”的同步准则
D、while(TSL(&lock))语句应在关中断的状态下执行

<details>
<summary>点击查看答案与解析</summary>

    正解：B
    解析：
    退出临界区的进程负责唤醒的是就绪态进程，A错
    等待的进程会一直停留在执行while(TSL(&lock))，不会主动放弃CPU，故不满足“让权等待”原则，B对，C错；
    while(TSL(&lock))应在关中断下执行，若TSL(&lock)一直都是true，不再开中断，那么系统会陷入停滞。
    故选B
</details>



#### 43、在9个生产者、6个消费者共享容量为8的缓冲器的问题中，互斥使用缓冲器的信号量初始值为？

A、1
B、6
C、8
D、9

<details>
<summary>点击查看答案与解析</summary>

    正解：A
    解析：
    互斥使用，信号量初值都是1
</details>



#### 44、信箱通信时一种？通信方式

A、直接通信
B、间接通信
C、低级通信
D、信号量

<details>
<summary>点击查看答案与解析</summary>
    
    正解：B
    解析：
    信箱通信是一种间接通信方式
</details>


#### 46、属于同一个进程的两个线程thread1和thread2并发执行，共享初值为0的全局变量x，thread1和thread2实现对全局变量x加1的机器级代码：
```c
//thread1
mov R1,x    //(x)->R1
inc R1      //(R1)+1->R1
mov x,R1    //(R1)->x
```
---
```c
//thread2
mov R2,x    //(x)->R2
inc R2      //(R2)+1->R2
mov x,R2    //(R2)->x
```
在所有可能的指令执行序列中，使x的值为2的序列有？个

A、1
B、2
C、3
D、4

<details>
<summary>点击查看答案与解析</summary>
    
    正解：B
    解析：
    由于两线程都是对x+1，所以只有两种。
    要么先Thread1，后thread2，要么thread2后thread1.
    故选B
</details>



#### 47、若x是管程内的条件变量，则当进程执行x.wait()时所做的工作是？

A、实现对变量x的互斥访问
B、唤醒一个在x上阻塞的进程
C、根据x的值判断该进程是否进入阻塞态
D、阻塞该进程，并将之插入x的阻塞队列中

<details>
<summary>点击查看答案与解析</summary>
    
    正解：D
    
    解析：
    条件变量是管程内部说明个使用的一种特殊变量，类似于信号量。

    同一时刻只有一个进程在管程内执行。
    若进程A执行了x.wait()操作，则该进程会阻塞，并挂到x对应的阻塞队列上。这样才可以有另外一个进程进入管程。故选D
</details>


#### 48、在下列同步机制中，可以实现让权等待的是？

A、Peterson方法
B、swap指令
C、信号量方法
D、TeatAndSet指令

<details>
<summary>点击查看答案与解析</summary>
    
    正解：C

    解析：
    硬件方法不行，故B、D错
    Peterson算法只满足有限等待，但不满足让步等待，A错
    故选C
</details>


## 综合题
