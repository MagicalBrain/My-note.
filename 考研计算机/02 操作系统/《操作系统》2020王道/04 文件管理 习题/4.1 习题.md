# 4.1

## 选择题

#### 5、打开文件操作的主要工作是？

A、把指定文件的目录复制到内存指定区域
B、把指定文件复制到内存指定区域
C、在指定文件所在的存储介质上找到指定文件的目录
D、在内存寻找指定的文件

正解：A

解析：
打开文件是将该文件的FCB存入内存的活跃文件目录表

找到文件目录是打开文件之前的操作

故选A

#### 11、有一个顺序文件有10000条记录，平均查找的记录数为5000条，采用索引顺序文件结构，则最好的情况下只需查找？次记录

A、1000
B、10000
C、100
D、500

正解：C

解析：
最好的情况是有$\sqrt{10000} = 100$组记录，每组100条，因此顺序查找记录个数为$\frac{100}{2} + \frac{100}{2} = 100$
故选C

#### 12、若一个用户进程通过read系统调用读取一个磁盘文件中的数据，则下列关于此过程的叙述正确的是？

1. 若该文件的数据不在内存，则该进程进入睡眠等待状态
2. 请求read系统调用会导致CPU从用户态切换到核心态
3. read系统调用的参数应包含文件的名称

A、1、2
B、1、3
C、2、3
D、1、2、3

正解：A

解析：
1：该文件的数据不在内存除法I/O中断，进入等待状态
2：read系统通过陷入指令进入核心态从而获取系统提供的服务
3：要读一个文件，首先要用open系统调用打开该文件，open中的参数包括路径名、文件名；而read只需用open返回的文件描述符

read要求用户提供三个参数：
1. 文件描述符fd
2. 缓冲区地址buf
3. 传送的字节数n

故选A

#### 14.一个文件的相对路径名是从（）开始，逐步沿着各级子目录追溯，最后到指定文件的整个通路上所有子目录名组成的一个字符串。

A.当前目录
B.根目录
C.多级目录
D.二级目录

14.A
相对路径是从当前目录出发到所找文件通路上所有目录名和数据文件名用分隔符连接起来
而形成的，注意与绝对路径的区别。

#### 15.目录文件存放的信息是（）。

A.某一文件存放的数据信息
B.某一文件的文件目录
C.该目录中所有数据文件目录
D.该目录中所有子目录文件和数据文件的目录

15.D
目录文件是FCB的集合，一个目录中既可能有子目录，又可能有数据文件，因此目录文件
中存放的是子目录和数据文件的信息。

#### 17、文件系统采用多级目录结构的目的是？

A、减少系统开销
B、节省存储空间
C、解决命名冲突
D、缩短传送时间

正解：C

解析：
多级目录结构提高了文件查找的速度，还允许用户建立同名文件

故选C

#### 19.UNIX操作系统中，文件的索引结构放在（）

A.超级块
B.索引结点
C.目录项
D.空闲块

19.B
UNIX采用树形目录结构，文件信息存放在索引结点中。超级块是用来描述文件系统的，具
体可参见本章的4.4节。

#### 20、操作系统为保证未经文件拥有者授权，任何其他用户都不能使用该文件，所提供的解决办法是？

A、文件保护
B、文件保密
C、文件转储
D、文件共享

正解：A

解析：
文件保护是针对访问权的保护

#### 21、设文件F1的当前引用计数值为1，先建立文件F1的符号链接（软链）F2，再建立F1的硬链接文件F3，然后删除文件F1.此时，F2和F3的引用计数值为？

A、0，1
B、1，1
C、1，2
D、2，1

正解：B

解析：
建立符号链接时，计数值直接复制，F1 = 1；
建立硬链接时，计数值+1，F2 = 1+1 = 2；

删除时对符号链接无影响，硬链接-1，故F1=1，F2=2-1=1，选B

#### 22.【2017统考真题】若文件f1的硬链接为2，两个进程分别打开f1和f2，获得对应的文件描述符为fd1和fd2，则下列叙述中正确的是（）

I.f1和f2的读写指针位置保持相同
I.f1和f2共享同一个内存索引结点
I.fdl和fd2分别指向各自的用户打开文件表中的一项

A.仅III
B.仅II、III
C.仅I、II
D.I、II和III

22.B
硬链接指通过索引结点进行连接。一个文件在物理存储器上有一个索引结点号。存在多个文件名指向同一个索引结点的情况，I正确。两个进程各自维护自己的文件描述符，III正确，I错误。所以选择B。

#### 24.对一个文件的访问，常由（）共同限制。

A.用户访问权限和文件属性
B.用户访问权限和用户优先级
C.优先级和文件属性
D.文件属性和口令

24.A
对于这道题，只要能区分用户的访问权限和用户优先级，就能得到正确的答案。用户访问权限是指用户有没有权限访问该文件，而用户优先级是指在多个用户同时请求该文件时应该先满足谁。
比如，图书馆的用户排队借一本书，某用户可能有更高的优先级，即他排在队伍的前面，但有可能轮到他时被告知他没有借阅那本书的权限。
文件的属性包括保存在FCB中对文件访问的控制信息。

#### 27、在一个文件被用户进程首次打开的过程中，操作系统需做的是？

A、将文件内容读到内存中
B、将文件控制块读到内存中
C、修改文件控制块中的读写权限
D、将文件的数据缓冲区首指针返回给用户进程

正解：B

解析：
类似前面的5题，打开文件是将该文件的FCB存入内存的活跃文件目录表
故选B

#### 28、某文件系统中，针对每一个文件，用户类别分别为4类：安全管理员……；访问权限分5种。若文件控制块中用二进制位串来表示文件权限，为表示不同用户对一个文件的访问权限，则描述文件访问权限的位数至少为？

A、5
B、9
C、12
D、20

正解：D

解析：
由排列组合原理可知，共有20种组合，一个组合用一位二进制，故20位选D。

#### 29、下列说法错误的是？

1. 一个文件在同一系统中，不同的存储介质上的复制文件，应采用一种物理结构
2. 对一个文件的访问常由用户访问权限和用户优先级共同限制
3. 文件系统采用树形目录结构后，对于不同用户的文件，其文件名应该不同
4. 为防止系统故障造成系统内文件受损，常采用存取控制矩阵方法保护文件

A、2
B、1，3
C、1，3，4
D、全选

正解：D

解析：
1：不同的存储介质，物理结构肯定不能相同
2：用户优先级与文件访问权限无关
3：可以不同，也可以相同
4：常采用备份的方法来保护文件，存取控制矩阵常用于多用户之间的存取权限保护

故全错，选D

## 综合题

#### 1.设某文件系统采用两级目录的结构，主目录中有10个子目录，每个子目录中有10个目录项。在同样多目录的情况下，若采用单级目录结构，所需平均检索目录项数是两级目录结构平均检索目录项数的多少倍？

#### 2.对文件的目录结构回答以下问题:

1）若一个共享文件可以被用户随意删除或修改，会有什么问题？
2）若允许用户随意地读、写和修改目录项，会有什么问题？
3）如何解决上述问题？

