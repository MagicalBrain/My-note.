# 2.4

## 选择题

#### 7、某系统中有三个并发进程都需要四个同类资源，则该系统必然不会发生死锁的最少资源是？

A、9
B、10
C、11
D、12

<details>
<summary>点击查看答案与解析</summary>
正解：B

解析：
题型：已知进程所需资源数，求不会死锁的最少资源数
做这种题，就是把每个进程所需的资源-1，最后再加1。因为平均分配后每个都差1，就会产生死锁，此时多一个就可以解决了，故$3 \times (4-1)+1=10$，选B
</details>


#### 8、某系统中共有11台磁带机，X个进程共享此磁带机设备，每个进程最多请求使用3台，则系统必然不会死锁的最大X值是？

A、4
B、5
C、6
D、7

<details>
<summary>点击查看答案与解析</summary>
正解：B

解析：
同上题类似，每个选项带入式子：$n\times(3-1)+1=11$，即n=5，故选B
</details>


#### 10、解除死锁通常不采用的方法是？

A、终止一个死锁进程
B、终止所有死锁进程
C、从死锁进程处抢夺资源
D、从非死锁进程处抢夺资源

<details>
<summary>点击查看答案与解析</summary>
正解：D

解析：
解除死锁的方法有：
1. 剥夺资源法
2. 撤销进程法

A和B是第二种，C是第一种，D这种方法对没有死锁的进程是不公平的也是不合理，故选D
</details>

#### 13.引入多道程序技术的前提条件之一是系统具有（）。

A.多个CPU
B.多个终端
C.中断功能
D.分时功能

#### 14、三个进程共享四个同类资源，这些资源的分配与释放只能一次一个，已知每个进程最多需要两个该类资源，则该系统？

A、有些进程可能永远得不到该类资源
B、必然有死锁
C、进程请求该类资源必然能得到
D、必然是死锁

<details>
<summary>点击查看答案与解析</summary>
正解：C

解析：
注意理解进程的资源需求满足后会在其执行完后释放资源的，所以这里没有死锁，没有死锁就说明进程肯定会执行完后释放资源给其他申请的资源的进程，故选C
</details>

#### 15.以下有关资源分配图的描述中，正确的是（）

A.有向边包括进程指向资源类的分配边和资源类指向进程申请边两类
B.矩形框表示进程，其中圆点表示申请同一类资源的各个进程
C.圆圈结点表示资源类
D.资源分配图是一个有向图，用于表示某时刻系统资源与进程之间的状态

#### 16.死锁的四个必要条件中，无法破坏的是（）

A.环路等待资源
B.互斥使用资源
C.占有且等待资源
D.非抢夺式分配

#### 20、系统资源分配图在下列情况下，无法判断是否处于死锁状态的有（ ）

1. 出现了环路
2. 没有环路
3. 每种资源只有一个，并出现环路
4. 每个进程结点至少有一条请求边

A、1,2,3,4
B、1,3,4
C、1,4
D、以上答案都不对

<details>
<summary>点击查看答案与解析</summary>
正解：C

解析：
出现了环路只是满足了死锁产生的必要条件中的“循环等待”，但不一定就会死锁，1对，2错；
3是死锁的充要条件
4即使每个进程结点至少有一条边，但只要资源足够就不会死锁

故选C
</details>

#### 21.下列关于死锁的说法中，正确的有（）

I.死锁状态一定是不安全状态
II.产生死锁的根本原因是系统资源分配不足和进程推进顺序非法
III.资源的有序分配策略可以破坏死锁的循环等待条件
IV.采用资源剥夺法可以解除死锁，还可以采用撤销进程方法解除死锁

A.I、III
B. II
C. IV
D.四个说法都对

#### 22.下面是一个并发进程的程序代码,正确的是()

```
Semaphore x1=x2=y=1;
Int cl=c2=0;
P1()
{
    while (1)
    {   
        P(x1);
        if(++c1==1)
            P(y);
        V(x1);
        computer(A);
        P(x1)
        if(—-c1==0)
            V(y); 
        V(x1);
    }
}

P2()
{
    while (1)
    {
        P(x2);
        if(++c2==1)
            P(y);
        V(x2);
        computer(B);
        P(x2);
        if(--c2==0)
            V(y);
        V(x2);
    }
}
```
A.进程不会死锁,也不会“饥饿”
B.进程不会死锁,但是会“饥饿”
C.进程会死锁,但是不会“饥饿”
D.进程会死锁,也会“饥饿”

#### 23、有两个并发进程，对于如下程序的运行，正确的说法是？
```c
int x,y,z,t,u;

P1()
{
    while(1)
    {
        x=1;
        y=0;
        if x>= 1 then y=y+1;
        z=y;
    }
}

P2()
{
    while(1)
    {
        x=0;
        t=0;
        if x<= 1 then t=t+1;
        u=t;
    }
}
```

A、程序能正确运行，结果唯一
B、程序不能正确运行，可能有两种结果
C、程序不能正确运行，结果不确定
D、程序不能正确运行，可能会死锁

<details>
<summary>点击查看答案与解析</summary>
正解：C

解析：
首先程序肯定无法正确运行。
手动模拟一下你就知道了

手动模拟：
1、
```c
x=1;
y=0;
if x>= 1 then y=y+1;
z=y;

x=0;
t=0;
if x<= 1 then t=t+1;
u=t;
```
结果：
```c
z=1
u=1
```

2、
```c
x=1;
x=0;
y=0;
if x>= 1 then y=y+1;
z=y;

t=0;
if x<= 1 then t=t+1;
u=t;
```
结果：
```c
z=0
u=1
```

3、
```c
x=0;
if x<= 1 then t=t+1;
u=t;
t=0;

x=1;
y=0;
if x>= 1 then y=y+1;
z=y;
```
结果：
```c
z=1
u=不确定
```
</details>

#### 27、假设具有5个进程的进程集合P={P0,P1,P2,P3,P4}，系统中有三类资源A，B，C，假设在某时刻有如下状态，见下表：


| |  allocation  | max   | available   |
| --- | --- | --- | --- |
| 0   |0 0 3    |0 0 4    |  x y z  |
|   1 |   1 0 0 | 1 7 5   |    |
|    2|  1 3 5  | 2 3 5   |    |
|    3|  0 0 2  | 0 6 4   |    |
|    4|   0 0 1 | 0 6 5   |    |

请问当x，y，z取那些值时，系统是处于安全状态的？

1. 1,4,0
2. 0,6,2
3. 1,1,1
4. 0,4,7

A、2,3
B、1,2
C、1
D、1,3

<details>
<summary>点击查看答案与解析</summary>
正解：C

解析：
除了书本上的办法，有没有更简便的办法？

一下是参考《王道》书P126-127页的
由题目可知：

MAX矩阵为：$\begin{bmatrix}
   0 & 0 & 4\\
   1 & 7 & 5\\
   2 & 3 & 5\\
   0 & 6 & 4\\
   0 & 6 & 5
  \end{bmatrix} $ Allocation矩阵：$\begin{bmatrix}
   0 & 0 & 3\\
   1 & 0 & 0\\
   1 & 3 & 5\\
   0 & 0 & 2\\
   0 & 0 & 1
  \end{bmatrix} $
  $MAX-Allocation=Need\begin{bmatrix}
   0 & 0 & 1\\
   0 & 7 & 5\\
   1 & 0 & 0\\
   0 & 6 & 2\\
   0 & 6 & 4
  \end{bmatrix} $
  矩阵的每一行都表示该进程在某种状态下的资源数

  对于1
</details>


#### 30、某系统有n台互斥使用的同类设备，三个并发进程分别需要3,4,5台设备，可确保系统不发生死锁的设备数n最小为？

A、9
B、10
C、11
D、12

<details>
<summary>点击查看答案与解析</summary>
正解：B

解析：
考虑最坏情况，每个进程都缺一个设备就可以执行，而此时没有设备了，此时设备数为$(3-1)+(4-1)+(5-1)=9$，此时只要再多一台设备就可以避免死锁了，即$9+1=10$台。
</details>



#### 31、系统中有3个不同的临界资源R1,R2,R3，被4个进程P1,P2,P3,P4共享，各进程对资源的需求为：
P1：申请R1和R2
P2：申请R2和R3
P3：申请R1和R3
P4：申请R2
若系统出现死锁，则处于死锁状态的进程数至少是（ ）

A、1
B、2
C、3
D、4

<details>
<summary>点击查看答案与解析</summary>
正解：C

解析：
通过画资源分配图可解
</details>

#### 32.【2015统考真题】若系统S1采用死锁避免方法，S2采用死锁检测方法。下列叙述中，正确的是（）

I.S1会限制用户申请资源的顺序，而S2不会
II.S1需要进程运行所需的资源总量信息，而S2不需要
III.S1不会给可能导致死锁的进程分配资源，而S2会

A.I、II
B.仅II、III
C.仅I、III
D.I、II、III

### 综合题