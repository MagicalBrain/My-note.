# 5.1 I/O管理概述

## 设备分类

### 按使用特性分

人机交互类外设

存储设备

网络通信设备

### 按传输速率分

低速

中速

高速

### 按信息交换的单位分

#### 块设备

**基本特征：**
传输速率快
可寻址
可随机读写

#### 字符设备

**基本特征：**
传输速率低
不可寻址
输入输出时多采用中断驱动方式

## 控制方式

### 程序直接控制方式

### 中断驱动方式

### DMA方式

### 通道控制方式



## I/O 子系统层次

```flow
    st=>start: 用户程序
    e=>end: 结束
    op=>operation: 设备独立性软件
    
    op1=>operation: 设备驱动程序
    op2=>operation: 中断处理
    op3=>operation: 硬件设备
    op4=>operation: 逻辑地址转换为物理地址（第五层 物理文件系统）

    st->op->op1->op2->op3
```

### 用户层

### 设备独立性软件

### 设备驱动程序

### 中断处理程序

### 硬件

分为机械部分和电子部分，机械部分即设备本身，电子部分称之为“设备控制器”

#### 设备控制器

**主要功能：**
1. 接受和识别命令
2. 实现数据交换
3. 记录自身状态信息以供CPU使用
4. 设备地址识别

**组成部分（实现功能的）**
1. 设备控制器与CPU的接口
2. 设备控制器与设备的接口
3. I/O控制逻辑

注意结合计算机组成原理相关内容进行学习（王道 第七章）

# 5.2 I/O核心子系统

## I/O子系统

## I/O调度

## 磁盘高速缓存

## 缓冲区

### 引入缓冲区的目的

### 缓冲区的实现方法

### 缓冲区的重要特性
1. 非空时不能冲入数据，只能取出
2. 空时可冲入数据，但必须到满时才可取出

### 缓冲区的分类

#### 单缓冲区

设T为磁盘传送数据到缓冲区的时间，M为缓冲区传送数据到用户区的时间，C为CPU处理用户区数据的时间

则系统处理一块数据的总时间为：$\max(C,T)+M$

#### 双缓冲区

设T为磁盘传送数据到缓冲区的时间，M为缓冲区传送数据到用户区的时间，C为CPU处理用户区数据的时间

则系统处理一块数据的总时间为：$\max(C+M,T)$

#### 循环缓冲区

#### 缓冲池

## 高速缓存与缓冲区的对比

## 设备分配

### 三种设备

### 设备分配的主要方式

1. 独享分配（独占）
2. 共享分配
3. 虚拟分配

### 设备分配的数据结构

### 设备分配的策略

### 设备分配的安全性

### 逻辑设备名到物理设备名的映射

## SPOOLing技术（假脱机技术）

### 输入井和输出进

### 输入缓冲区和输出缓冲区

### 输入进程和输出进程