# 1.3 操作系统的运行环境

## 选择题

5、用户程序在用户态下要使用特权指令引起的中断属于？

A、硬件故障中断
B、程序中断
C、外部中断
D、访管中断

<details>
<summary>点击查看详细内容</summary>
正解：D

解析：
因操作系统不允许用户直接执行某些“危险性高”的指令，故用户态运行这些指令的结果会转成操作系统的核心态去运行，这个过程就是访管中断
</details>


7、下列操作系统的各个功能组成部分中，？可不需要硬件的支持

A、进程调度
B、时钟管理
C、地址映射
D、中断系统

<details>
<summary>点击查看详细内容</summary>
正解：A

解析：
中断系统和地址映射显然是需要的
而时钟管理中，重置时钟等是有硬件完成的
而进程调度是由调度算法决定CPU的使用权，由操作系统实现的，无须硬件
</details>


8、在中断发生后，进入中断处理的程序属于？

A、用户程序
B、可能是应用程序，也可能是操作系统程序
C、操作系统程序
D、既不是应用程序，又不是操作系统程序


<details>
<summary>点击查看详细内容</summary>
正解：C

解析：
进入中断处理的程序在核心态执行，是操作系统程序
</details>


9、计算机区分核心态和用户态指令后，从核心态到用户态的转换是由操作系统程序执行后完成的，而用户态到核心态的转换是由？完成的

A、硬件
B、核心态程序
C、用户程序
D、中断处理程序

<details>
<summary>点击查看详细内容</summary>
正解：A

解析：
计算机用过硬件中断机制完成由用户态到核心态的转换
核心态程序只有在操作系统在进入核心态后才可执行
中断处理程序一般也在核心态执行
用户程序不可能完成这个转换，否则会威胁到计算机的安全
</details>


12、只能在核心态运行的指令是？

A、读时钟指令
B、置时间指令
C、取数指令
D、寄存器清零

<details>
<summary>点击查看详细内容</summary>
正解：B

解析：
若在用户态下执行 置时钟指令，则一个用户进程就可以在时间片还没到之前就把时钟重置导致时钟永远不会用完，这显然不合理
</details>


13、”访管“指令？使用

A、仅在用户态下
B、仅在核心态
C、在规定时间内
D、在调度时间内

<details>
<summary>点击查看详细内容</summary>
正解：A

解析：
访管指令仅在用户态下使用，因为”访管“指令能将用户态转变为核心态
</details>


15、在操作系统中，只能在核心态下执行的指令是？

A、读时钟
B、取数
C、广义指令
D、寄存器清0

<details>
<summary>点击查看详细内容</summary>
正解：C

解析：
广义指令即系统调用指令，必然工作在核心态。
但是调用广义指令的指令不一定是特权指令。
</details>


24、处理外部中断时，应该由操作系统保存的是？

A、程序计数器的内容
B、通用寄存器的内容
C、快表中的内容
D、Cache中的内容

<details>
<summary>点击查看详细内容</summary>
正解：B

解析：
PC由中断隐指令自动保存
而通用寄存器的值由操作系统保存
</details>


25、假定下列指令已装入指令寄存器，则执行时不可能导致CPU从用户态变为内核态的是？

A、DIV R0, R1;   (R0)/(R1)->R0
B、INT n;    产生软中断
C、NOT R0; 寄存器R0的内容取非
D、MOV R0, addr; 把地址addr处的内存数据放入寄存器R0

<details>
<summary>点击查看详细内容</summary>
正解：C

解析：
A：有除零异常的可能
B：为中断指令
D：有缺页的可能

C不会，故选C
</details>


26、执行系统调用的过程包括如下主要操作：
1. 返回用户态
2. 执行陷入指令
3. 传递系统调用参数
4. 执行相应的服务程序
正确的执行顺序是？

A、2314
B、2431
C、3241
D、3421

<details>
<summary>点击查看详细内容</summary>
正解：C

解析：
首先返回用户态肯定是最后的
传递系统参数、执行陷入指令应该在执行相应的服务程序之前

故选C

陷入指令的功能就是将用户态转变为核心态
</details>


27、定时器产生时钟中断后，由时钟中断服务程序更新的部分内容是？

1. 内核中时钟变量的值
2. 当前进程占用CPU的时间
3. 当前进程在时间片内的剩余执行时间

A、1、2
B、2、3
C、1、3
D、1、2、3

<details>
<summary>点击查看详细内容</summary>
正解：D

解析：
既然要改变2，就必定要改变3

时钟中断要处理的内容有：
1. 系统时间
2. 进程的时间片
3. 延时
4. 使用CPU的时间
5. 各种定时器

故1、2、3都有，选D
</details>


## 综合题