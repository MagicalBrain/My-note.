## 课本习题

### 选择题

10、某一RAM芯片，其容量为$32K \cdot 8$位，除电源和接地端外，该芯片引出线的最少数目？

A、25

$$32K = 2^{15}$$

$$15 + 8 = 23$$

还有两条线？

读写控制线（WE）

片选线（CS）

故23 + 2 =25

14、下列叙述中，正确的？

A、主存可由RAM和ROM组成
B、主存只能由ROM组成
C、主存只能由RAM组成

A
主存是由RAM和ROM共同组成的

ROM中闪存（Flash Memory）具备RAM的功能，可作为主存

16、可编程的只读存储器（   ）

A、不一定是可改写的
B、一定是可改写的
C、一定是不可改写的只读存储器

A

可编程只读存储器（PROM）是通过是否烧断熔丝来存储0和1的，所以只能进行一次修改。修改一次之后就无法再改写了。所以是不一定可以改写，因为题目中没有说是否改写过一次。

18、下述说法正确的是？

A、EPROM是可改写的，因而也是随机存储器的一种
B、EPROM是可改写的，但它不能作为随机存储器
C、EPROM只能改写一次，故不能作为随机存储器

B

EPROM允许用户进行任意次改写，原理：
用户通过改变MOS管的D端的正电压的有无来写入0和1，恢复只需用紫外线照射即可。

但是由于恢复原来的状态需要人为的紫外线照射，所以不能用做随机存储器。

A，EPROM不能用做随机存储器
C，不能用做存储器的原因不是这个

19、和动态MOS存储器相比，双极型半导体存储器的性能是？

A、集成度高、存取周期快，位平均功耗小
B、集成度高、存取周期快、位平均功耗大
C、集成度低、存取周期快、位平均功耗大

C

解析：
构成存储材料主要有半导体与磁介质。而半导体主要就是双极型和MOS性两种。

速度：MOS慢；双极型快

容量：MOS大；双极想小

=> 双极型集成度低，存取周期快，位功耗大

21、磁盘记录方式一般采用？

A、调频制
B、调相制
C、不归零制

A

23、磁盘存储器的等待时间通常是指？

A、磁盘旋转一周所需时间
B、磁盘旋转半周所需的时间
C、磁盘旋转2/3所需的时间

B

25、活动头磁盘存储中，信息写入或读出磁盘是？进行的

A、并行方式
B、串行方式
C、串并方式

B

26、磁盘旋转转速提高一倍，则？

A、平均查找时间缩小一半
B、其存取速度也提高一倍
C、不影响查找时间

C

解析：

不影响查找时间，只影响读取时间

28、交叉编址的存储器实质是一种？存储器，它能？执行？独立的读/写操作

A、模块式、并行、多个
B、模块式、串行、多个
C、集体式、并行、一个

A

交叉编址其实就是把若干个存储芯片上的存储位置统一到一起，比如说a芯片的0位置是0、b芯片的0位置是1……

所以其实质是并行的，而且可以执行多个读写操作

37、下述说法中？是错误的

A、虚存的目的是为了给每一个用户提供独立的、比较大的编程空间
B、虚存中每一次访问一个虚地址，至少要访问两次主存
C、虚存系统中，有时每一个用户的编程空间小于实存空间

B

A、虚拟存储系统包括了主存、辅存。将这两个看成是一体的
C、大多数情况下，用户的编程空间都是小于实际空间的。
B、最多访问一次，只有在缓存没有所需的数据时才访问主存进行查找

38、磁盘上的磁道是？

A、记录密度不同的同心圆
B、记录密度相同的同心圆
C、一条阿基米德螺线

A

39、软盘驱动器采用的磁头是？

A、浮动式
B、接触式
C、固定式

B

42、虚拟存储管理系统的基础是程序访问的局部性理论，此理论的基本含义是？

A、在程序的执行过程中，程序对主存的访问是不均匀的
B、空间局部性
C、代码的顺序执行

A
B、不全面，还应该包括时间局部性
C、与代码的顺序执行无关
故A对

46、由于磁盘上的内部同心圆小于外部同心圆，则对其存储容量而言？

A、内部同心圆大于外部同心圆
B、内部同心圆等于外部
C、内部同心圆小于外部

B

无论是内部还是外部，容量都是一样的。只是内部存储密度比外部大。

50、若磁盘的转速提高一倍，则？

A、平均等待时间和数据传送时间减半
B、平均定位时间不变
C、平均寻道时间减半

B
A、B、C都与查找时间有关，故都不变，B对

51、下列说法中正确的是？

A、缓存与主存统一编址，缓存的地址空间是主存地址空间的一部分
B、主存储器是只由具有易失性的随机读/写存储器构成
C、单体多字存储器主要解决访存速度的问题

C

解析：
A、缓存的地址空间只是主存的一个映射，互不相包含
B、明显错误，除了RAM还有ROM（闪存）也可以构成主存
C、是正确的，单体多字存储器一次读写多个字，故可以提高访存速度

### 填空题

### 综合题

# 《王道》习题

## 3.1 存储器的层次结构

### 选择题

5、相联存储器是按？方式进行寻址的存储器

A、地址指定方式
B、堆栈存储方式
C、内容指定方式和堆栈存储方式相结合
D、内容指定方式和地址指定方式相结合

正解：D

解析：其基本原理是把存储单元所存的内容的某一部分作为检索项去检索该存储器。
故其是按内容或地址进行寻址的，一般用来制作TLB、相联Cache等
选D

### 综合题

无

## 3.2

### 选择题

5、在Cache和主存构成的两级存储体系中，主存与Cache同时访问，Cache的存取时间是100ns，主存的存取时间是1000ns，若希望有效存取时间不超过Cache的115%，则Cache的命中率至少为？

A、90%
B、98%
C、95%
D、99%

正解：D

解析：
设命中率为x，有方程：$$x \cdot 100 + (1- x) 1000 \leq 115$$
$x \approx 98.33%$
即至少为99% 

### 综合题

## 3.3 半导体随机存储器

### 选择题

1、某一SRAM芯片，其容量为$1024 \times 8$ 位，除电源和接地端外，该芯片的引脚的最小数目为？

A、21
B、22
C、23
D、24

正解：A

解析：
$1024 = 2^{10}$即地址线有10条，8位则输入输出存储线8条，再加上片选线SC，读写控制线WE，$18 + 2 = 20$，但是由于选项中没有20，则读写控制线分开为两条了，故为21，选A

5、动态RAM采用下列哪种刷新方式时，不存在死时间？

A、集中刷新
B、分散刷新
C、异步刷新
D、都不对

正解：B

解析：
集中刷新，必然存在死时间；
采用分散刷新时，机器的存取周期中的一段用来读/写，另一段用来刷新，故没有死时间，但存取周期过长
异步刷新只是缩短了死时间而已，并没有完全消除它

9、某一DRAM芯片，采用地址复用技术，其容量为$1024 \times 8$位，除电源和接地端外，该芯片的引脚数最少是？（读写为两根）

A、16
B、17
C、19
D、21

正解：D

解析：
$1024 = 2^{10}$，本来地址线有10条，但由于采用了地址复用技术，所以地址线减半为5条
而且，片选线由2条行列选择线来代替，读写控制线有2条
$5 + 8 + 2 + 2 = 17$
故选B

10、某容量为256MB的存储器有若干个$4M \times 8$位的DRAM芯片构成，该DRAM芯片的地址引脚和数据引脚总数为？

A、19
B、22
C、30
D、36

正解：A

解析：
$4M = 2^{20+2} = 2^{22}$，注意DRAM采用的是地址复用技术所以地址线数为：$22 \div 2 = 11$
地址线、数据线总数为$$11 + 8 = 19$$
故选A

12、下列关于闪存的叙述中，错误的是？

A、信息可读可写，并且读、写速度一样快
B、存储元有MOS管组成，是一种半导体存储器
C、掉电后信息不丢失，是一种非易失性存储器
D、采用随机访问方式，可替代计算机外存

正解：A

解析：
写要比读慢不少（**硬件常识**）；且闪存是EEPROM的一种，故有MOS管，是一种半导体存储器

14、U盘属于那种类型的存储器？

A、高速缓存
B、主存
C、只读存储器
D、随机存取器

正解：C

解析：
U盘里使用的存储芯片是闪存芯片，故为只读存储器（ROM），而不是随机存储器（RAM）。ROM也是可以随机存取的，这点要注意，不是只有RAM才可以随机存取的

### 综合题

## 3.4 主存储器与CPU的连接

### 选择题

3、某存储器容量为64KB，按字节编址，地址4000H～5FFFH为ROM区，其余为RAM区，容采用$8K \times 4$位SRAM芯片进行设计，则需要芯片的数量为？

A、7
B、8
C、14
D、16

正解：C

解析：
因为$5FFFH - 4000H +1 = 2000H = 2^{13} = 8KB$
$64KB - 8KB = 56KB$
又因为，两个4位的SRAM芯片才能成一个$8KB$，故
$\frac{56}{8} \times 2 = 14$，故选C

4、某计算机存储器按字节编址，主存地址空间大小为$64MB$，现用$4M \times 8$位的RAM芯片组成32MB的主存储器，则存储器地址寄存器MAR的位数至少是？

A、22
B、23
C、25
D、26

正解：D

解析：
地址空间是多少就决定了MAR的位数，其他都是浮云是干扰，故
$64MB = 2^{6+20}$，即26位，选D

11、地址总线$A_0 \sim A_{15}$，其中$A_0$为高位，$A_{15}$为低位，用$4K \times 4$位的存储芯片组成16KB存储器，则产生片选信号的译码器的输入地址线应该是？

A、$A_2A_3$
B、$A_0A_1$
C、$A_{12}A_{13}$
D、$A_{14}A_{15}$

正解：A

解析：
这里要**注意的是$A_0$为高位，而地址是从低位开始的**，$4K = 2^{10+2}$为12位，故$A_{15} \sim A_{4}$为地址线输入，片选则是其高位，由于需要$4 \times 2$块芯片，所以是其高两位为片选输入，即$A_2A_3$，故选A

14、若片选地址为111时，选定某一$32K \times 16$位的存储芯片工作，则该芯片在存储器的首地址和末地址分别为？

A、00000H、01000H
B、38000H、3FFFFH
C、3800H、3FFFH
D、0000H、0100H

正解：B

解析：
自己的理解：选项中都是16进制，故存储器芯片的范围是15位的：$0000\ 0000\ 0000\ 0000 \sim 0111\ 1111\ 1111\ 1111 = 7FFFH$，由于前面还有片选信号3位，故111时地址为$0011\ 1000\ 0000\ 0000\ 0000 = 38000H$，易得选项B


###  综合题

## 3.5 双端口RAM和多模块存储器

### 选择题

5、某机器采用四体低位交叉存储器，现分别执行一下操作：

1. 读取6个连续地址单元中存放的存储字，重复80次
2. 读取8个连续地址单元中存放的存储字，重复60次

则1、2所花费的时间之比为？

A、1:1
B、2:1
C、4:3
D、3:4

正解：C

解析：
设一个字的读取周期为T，首先得理解，读取连续6个字时，第一个T内四个字都能进来，第二个T时结束，倒数第二个字才读取完毕，可以接着下一次操作，故一次操作所花时间为$(6 - 1)\times \frac{T}{4} = 2.25T$,80次操作则为$(80 - 1) \times 2T + 2.25T = 160.25T$

同理2的第一次操作时间为$2+3\times \frac{T}{4} = 2.75T$
总时间为$(60-1)\times 2T + 2.75T = 120.75T$

比例为$\frac{160.25}{120.75} \approx \frac{4}{3}$

6、下列说法正确的有？

1. 高位多体交叉存储器很好地满足了程序的局部性原理
2. 高位四体交叉存储器可能在一个存储周期内连续访问4个模块
3. 双端口存储器可以同时访问同一区间、同一单元

A、1、3
B、2、3
C、3
D、1

正解：B

解析：
1：高位多体交叉存储器时连续的，所以不满足局部性原理，错
故选B

7、某计算机使用四体交叉编织存储器，假定在存储器总线上出现的主存地址（十进制）为$8005,8006,8007,8008,8001,8002,8003,8004,8000$,则可能发生访存冲突的是？

A、8004和8008
B、8002和8007
C、8001和8008
D、8000和8004

正解：D

解析：
发生冲突的条件是**连续访问同一个存储单元**
总线上传来的就是访存的顺序，8004、8000是同一个单元，且是连续访存，发生冲突，故选D

8、某计算机主存按字节进行编址，有4个$64M \times 8$位的DRAM芯片采用交叉编址方式构成，并与宽度为32位的存储器总线相连，主存每次最多读写32位数据。若double型变量x的存储地址为$804\ 001AH$，则读取x需要的存储周期是？

A、1
B、2
C、3
D、4

正解：C

解析：
首先得知道double是64位的，故得连续访存8个存储单元，又因为其存储地址为$AH = 10, 10 \% 4 = 2$，故其是从第三个单元开始，一个周期4个单元，第一个周期只能读2个单元，第二个周期为4个，第三个周期读2个完成。故3个周期，选C

### 综合题

## 3.6 高速缓冲存储器

### 选择题

3、某计算机的Cache共有16块，采用二路组相联映射方式（即每组2块）。每个主存块的大小为32B，按字节编址，主存129号单元所在主存块应装入的Cache组号是？

A、0
B、2
C、4
D、6

正解：C

解析：
先将主存地址转为二进制：$1000\ 0001$
由于主存块的大小是$32 B = 2^5 B$，所以低位5位是主存地址，高位的$8-5 =3$为Cache块号即$100 = 4$，所以块号是4，第四块在第四组中，所以答案选C

4、假设计算机按字节编址，Cache有4行，Cache和主存之间交换的块大小为一个字，若Cache的内容初始为空，采用2路组相联映射方式和LRU替换策略，则访问的主存地址值依次为：0、4、8、2、0、6、8、6、4、8时，命中Cache的次数是？

A、1
B、2
C、3
D、4

正解：C

解析：
这题的组相联映射的逻辑有点奇怪不是唐朔飞老师书里的，无需在意，了解一下即可

第0组：

|   |   0 |4    | 8   | 2   | 0   | 6   | 8   |6    | 4   | 8   |
| :---: | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
|   块0 | | 0   | 4   | 4   | 8   | 8   | 0   | 0   | 8   | 4   |
|    块1| 0   | 4   |  8  |  8  |  0  |  0  |  8  |  8  |  4  |  8  |

第1组：

|   |   0 |4    | 8   | 2   | 0   | 6   | 8   |6    | 4   | 8   |
| :---: | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
|   块2 | |    |    |    |    | 2   | 2   | 6   | 6   | 6   |
|    块3| |    |    |  2  |  2  |  6  |  6  |  6  |  6  |  6  |

5、访问Cache系统失效时，通常不仅主存向CPU传送信息，同时还需要将信息写入Cache，在此过程中，传送和写入的数据宽度各为？

A、块、页
B、字、字
C、字、块
D、块、块

正解：C

解析：
向CPU传送数据的单位是字，向Cache写入的数据单位是块，故选C

7、某虚拟存储器系统采取页式内存管理，使用LRU页面替换算法，考虑以下页面访问地址流：

|  1  | 8   | 1   | 7   |8    |  2  | 7   | 2   | 1   | 8   | 3   |8    | 2   | 1   |3    |1    |7    |1    | 3   |7    |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
假定内存容量为4个页面，开始时是空的，则页面失效率为？

A、30%
B、5%
C、1.5%
D、15%

正解：

解析：

列表：


|    | 1   | 8   | 1   |7    |8    | 2   | 7   | 2   | 1 | 8   |3    | 8   | 2   | 1   | 3   | 1   |7    | 1   | 3   | 7   |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 页0   |    |    |    |    |    | 1   | 1   | 1   | 8   | 7   |  2  | 2   | 1   | 3   | 8   |8    | 2   | 2   | 2   | 2   |
|页1 | |    |    | 8   | 1   | 7   |  8  | 8   |7    |2    |   1 | 1   | 3   | 8   | 2   |2    | 3   | 3   | 7   |  1  |
|页2    |    | 1   | 8   | 1   |7    | 8   |2    | 7   | 2   | 1   |8    | 3   |   8 | 2   | 1   | 3   | 1   | 7   |1    |3    |
| 页3   | 1   | 8   | 1   | 7   | 8   | 2   | 7   | 2   | 1   | 8   |3    |8    | 2   | 1   | 3   |  1  | 7   |1    | 3   | 7   |
|   命中？ |    |    |  1  |    | 1   |    | 1   |  1  | 1   | 1   |    | 1   | 1   | 1   |1    | 1   |    | 1   | 1   |1    |

由上表可见命中了14个
失效率：$= \frac{20-14=6}{20} \times 100\% = 30\%$

10、某存储系统中，主存容量是Cache的4096倍，Cache被分为64块，当主存地址和Cache地址采用直接映射法时，地址映射表的大小应为？
（假设不考虑一致维护和替换算法位）

A、$6 \times 4097$bit
B、$64 \times 12$bit
C、$6 \times 4096$bit
D、$64 \times 13$bit

正解：D

解析：
Cache是64块的，且$4096 = 2^{12}$，但是还得加上一位有效位（必须得有的，注意不能漏！）。
$12 + 1 = 13,\ 64 \times 13$故选D

11、有效容量为128KB的Cache，每块16B，采用8路组相联映射，字节地址为1234567H的单元调入该Cache，则其Tag应为？

A、1234H
B、2468H
C、048DH
D、12345H

正解：C

解析：
8路组相联映射，得一组8块；
128KB，每块16B，一共$\frac{128KB}{16B} = 8K$块，$1K = 2^{10}$组；
$16 = 2^4,\ 1K = 2^{10}$，即低位14位为存储信息，高位14位为Tag：
$00\ 0100\ 1000\ 1101 = 048DH$，故选C

12、有一主存-Cache层次的存储器，其主存容量为1MB，Cache容量为16KB，每块有8个字，每个字32位，采用直接地址映像方法，若主存地址为35301H，且CPU访问Cache命中，则在Cache的第？字块（十进制表示，起始为0）

A、152
B、153
C、154
D、151

正解：A

解析：
因为字的大小是32位，故$32 = 2^5$，即低位5位为字块内地址；
因为块的个数有$\frac{16KB}{8 \times 32} = 2^9$，故中间这9位为Cache字块地址，即Cache内第几字块：$0\ 1001\ 1000 = 152$，故选A

13、有如下C语言代码段：
```c
for (k = 0; k< 1000;k++)
    a[k] = a[k] + 32;
```
若数组a和变量k均为int型，int型数据占4B，数据Cache采用直接映射方式，数据区大小为1KB，块大小为16B，该程序段执行前Cache为空，则该程序段执行过程中访问数据a的Cache缺失率为？

A、1.25%
B、2.5%
C、12.5%
D、25%

正解：C

解析：
首先分析这段代码，```a[k] = a[k] + 32;```，先执行等号右边的a[k]，对数据进行读取，又因为int型是32位的，所以是把下一个int变量的数值写入a[k]（等号左边的）
在直接映射方式中，一读取块内数据，就会调用整个块（程序访问的局部性原理），所以读的时候第一个变量没有命中Cache，后来写的时候就都命中了。一共8次访问，一次缺失，故缺失率$\frac{1}{8} = 12.5%$，故选C

15、采用指令Cache与数据Cache分离的主要目的是？

A、降低Cache的缺失损失
B、提高Cache的命中率
C、降低CPU的平均访问时间
D、减少指令流水线的资源冲突

正解：A

解析：
这两个分开就是取指和取数分别到不同的Cache中去寻找，则指令流水线中取指部分和取数部分就可以很好地避免冲突

17、设有8页的逻辑空间，每页有1024B，它们被映射到32块的物理存储区中，则按字节编址逻辑地址的有效位是？物理地址至少是？位

A、10，12
B、10，15
C、13，15
D、13，12

正解：C

解析：
分清楚逻辑地址和物理地址。
逻辑地址是逻辑空间里头的，与页的大小和页数有关，即$8 = 2^3,\ 1024 = 2^{10},\ 10+3 = 13$位
物理地址：块内地址和页内地址是一样的，是映射到物理存储区的地址：$32 = 2^5,\ 1024 = 2^{10},\ 10+ 5 = 15$位


### 综合题

## 3.7 虚拟存储器

### 选择题

3、虚拟存储器的常用管理方式有段式、页式、段页式，对于它们在与主存交换信息时的单位，以下表述正确的是？

A、段式采用“页”
B、页式采用“块”
C、段页式采用“段”和“页”
D、页式和段页式均采用“页”

正解：D

解析：
段式：采用的是“段”为单位
页式：对程序分页，然后采用页进行交互
段页式：先逻辑分段，然后分页，以页为单位进行交互

5、某计算机主存地址空间大小为256MB，按字节编址。虚拟地址空间带小为4GB，采用页式存储管理，页面大小为4KB，TLB采用全相联映射，有4个页表项，内容如下：


|  有效位  | 标记   | 页框号   |
| --- | --- | --- |
|  0  | FF180H   |  0002H  |
|   1 |  3FFF1H  |0035H    |
|    0|   02FF3H | 0351H   |
|    1|   03FFFH |   0153H |

则对虚拟地址$03FF F180H$进行虚实地址转换的结果是？

A、$015\ 3180H$
B、$003\ 5180H$
C、TLB缺失
D、缺页

正解：A

解析：
我的理解：
首先要明白虚拟地址是什么？
从表格里可以看出，4个表项里有$03FFFH$，说明该地址在表项里头，至于会不会超出该表的范围就用$180H - 153H \leq 4K$,所以选A

9、关于虚拟存储器，下列说法正确的是？

1. 虚拟存储器利用了局部性原理
2. 页式虚拟存储器的页面若很小，主存中存放的页面较多，导致缺页频率较低，换页次数减少，最终可以提升操作速度
3. 页式虚拟存储器的页面很大，主存中存放的页面较少，导致页面调度频率较高，换页次数增加，降低操作速度
4. 段式虚拟存储器中，段具有逻辑独立性，易于实现程序的编译、管理和保护，也便于多道程序共享

A、1、3、4
B、1、2、3
C、1、2、4
D、2、3、4

正解：A

解析：
页式虚拟存储器中，页面若很小，虚拟存储器中包含的页数过多，使得页表的体积过大，导致页表本身占据的存储空间过大，导致操作速度变慢，2是错的
页面大时，页面数变少，由于主存的容量比虚拟存储器的容量小，主存中的页面数会更少，每次页面装入的时间会变长，操作速度会变慢，3是对的

总结：页面过大过小都会降低虚拟存储器的操作速度

11、假定编译器将赋值语句“x = x+3”转换为指令“add xaddr, 3”，其中xaddr是x对应的存储单元的地址。若执行该指令的计算机采用也是虚拟存储方式，并配有相应的TLB，且Cache使用直写方式，则完成该指令功能需要访问的主存次数至少是？

A、0
B、1
C、2
D、3

正解：B

解析：
有三种情况？
1. xaddr不在主存在Cache，那么取出x时不需要访问主存，但是将它赋值时需要访问主存，访问主存次数为1
2. xaddr在主存，取出x访问主存一次，赋值又访问一次，2次
（直写法要同时写入Cache和主存）

故至少1次，选B

12、假定主存地址为32位，按字节编址，主存和Cache之间采用直接映射方式，主存块大小为4个字，每字32位，采用回写法，则能存放4K数据的Cache总容量的位数至少是？

A、146K
B、147K
C、148K
D、158K

正解：C

解析：

首先我们得知道直接映射法的地址结构：

|  主存标记号（$32-10-4=18$位） |Cache块号（10位）    | 字块内地址（大小：4位）   |
| --- | --- | --- |

由题目中的4K数据的Cache，我们可以知道Cache的块数为$\frac{4K}{4} = 1K$块，即$2^{10}$，Cache块号为10位

又因为主存块大小为4个字，所以字块内地址为4位，主存标记号为$32 - 10 - 4 = 18$位
 
 Cache容量分为两部分，一部分为存储的数据，大小为：$4 \times 32 \times 1K = 128K$；
 另一部分为Cache块对应的主存块的标记，除了18位外有一位有效位，又因为**回写法**有一位**一致性维护位（脏位）**，故标记容量为$(18+1+1) \times 1K = 20K$
 
 故总容量为：$128K + 20K = 148K$
 选C

### 综合题