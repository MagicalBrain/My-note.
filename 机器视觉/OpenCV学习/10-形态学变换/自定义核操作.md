# 自定义核操作

在之前的形态学操作中，默认的核是$3 \times 3$的，但实际上opencv允许我们自定义更加通用的核。

在形态学上，核常常被称为“构造元素”。因此自定义核的函数名为：`cv::getStructuringElement()`

其实，你可以任意创建一种需要的构造元素用于cv::dilate()，cv::erode()或cv::morphologyEx()等，但这些行为通常需要做更多的操作，一般常用的是非矩形核是一种非常规形状。函数cv::getStructuringElement()如下所示：

```cpp
cv::Mat cv::getStructuringElement(
    int shape,      //Element shape, e.g., cv::MORPH_RECT
    cv::Size ksie,  //Size of structuring element (odd num!)
    cv::Point anchor = cv::Point(-1,-1)    //Location of anchor point
);
```

**shape**
控制构造元素的基本形状

可选项：
|形状值|元素|描述|
|:--:|:--:|:--:|
|cv::MOP_RECT|矩形| $\forall i,j \rightarrow E_{i,j} = 1$ |
|cv::MOP_ELLIPSE|椭圆|以`ksize.width`和`ksize.height`为两个半径作椭圆|
|cv::MOP_CROSS|交叉|当 `i == anchor.y || j == anchor.x` 时 $E_{i,j} = 1$ |


**ksize**
控制元素的大小

**anchor**
控制锚点位置，通常为`cv::Point(-1, -1)`表示锚点在元素的中心。

如果`cv::getSturcturingElement()`函数不能满足要求，实际上可以用任意的`cv::Mat`作为形态学的构造元素。
