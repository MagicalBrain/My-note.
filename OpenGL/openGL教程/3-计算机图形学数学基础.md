# 3-计算机图形学数学基础

## 3.1 3D坐标系统

OpenGL用的是右手坐标系

Direct3D用的是左手坐标系

使用左右手手指的朝向来区别的：
中指是x轴、大拇指是y轴、食指是z轴

一般默认都是右手坐标系。

## 3.2 点

## 3.3 矩阵

在计算机图形学中用的矩阵一般都是4维的

GLSL:`Mat4`
GLM:`Mat4`

### 单位矩阵

### 矩阵的转置

`glm::transpose(mat4)`和`transpose(mat4)`

### 矩阵加法

重载了+号

### 矩阵乘法

通常也叫矩阵的合并

### 矩阵求逆

`mat4.inverse()`

## 矩阵变换

### 平移矩阵

### 缩放矩阵

### 旋转矩阵

### 投影矩阵

### LookAt矩阵

## 习题

### 3.1 修改程序2.5，为顶点着色器添加程序3.1中的一个buildRotate()函数，并将其应用到组成三角形的点上。其结果应该导致三角形从原来的方向进行旋转。这个旋转过程无须动画化。

```cpp
// 构建并返回平移矩阵
mat4 buildTranslate(float x, float y, float z) { 
    mat4 trans = mat4(
        1.0, 0.0, 0.0, 0.0, 
        0.0, 1.0, 0.0, 0.0,
        0.0, 0.0, 1.0, 0.0,
          x,   y,   z, 1.0 
        );
    return trans;
}

// 构建并返回绕X轴的旋转矩阵
mat4 buildRotateX(float rad) { 
    mat4 xrot = mat4(
        1.0, 0.0,      0.0,       0.0, 
        0.0, cos(rad), -sin(rad), 0.0,
        0.0, sin(rad), cos(rad),  0.0, 
        0.0, 0.0,      0.0,       1.0 
    ); 
    return xrot;
}

// 构建并返回绕Y轴的旋转矩阵
mat4 buildRotateY(float rad) { 
    mat4 yrot = mat4(
        cos(rad), 0.0, sin(rad), 0.0, 
        0.0, 1.0, 0.0, 0.0,
        -sin(rad), 0.0, cos(rad), 0.0,
        0.0, 0.0, 0.0, 1.0 );
    return yrot;
}

// 构建并返回绕Z轴的旋转矩阵
mat4 buildRotateZ(float rad) { 
    mat4 zrot = mat4(
        cos(rad), -sin(rad), 0.0, 0.0,
        sin(rad), cos(rad), 0.0, 0.0,
        0.0, 0.0, 1.0, 0.0,
        0.0, 0.0, 0.0, 1.0 );
    return zrot;
    
}

// 构建并返回缩放矩阵
mat4 buildScale(float x, float y, float z) { 
    mat4 scale = mat4(
        x, 0.0, 0.0, 0.0,
        0.0, y, 0.0, 0.0,
        0.0, 0.0, z, 0.0,
        0.0, 0.0, 0.0, 1.0 );
    return scale;
}
```

### 3.2 （研究）在3.4节末尾，我们讲到欧拉角在某些情况下会导致瑕疵。其中最常见的叫作“万向节死锁”。描述万向节死锁

### 3.3 （研究）避免这些瑕疵的一种方法是使用四元数而非欧拉角。我们在本书中并没有学习四元数，但是GLM有一些四元数相关的类和函数。请独立学习四元数，并熟悉GLM中的四元数功能。


