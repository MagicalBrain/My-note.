# cp命令的简要实现

## 源代码

```cpp
#include <iostream>
#include <unistd.h>

#define BUFFSIZE 4096

int main(void)
{
    int n;
    char buf[BUFFSIZE];

    while ( (n = read(STDIN_FILENO, buf, BUFFSIZE)) > 0) 
    {
        if (write(STDOUT_FILENO, buf, n) != n)
            std::cout << "write error" << std::endl;
    }
    
    if (n < 0)
        std::cout << "read error" << std::endl;
    return 0;
}
```

这是一个使用标准输入输出的程序。

### 使用方法

```bash
g++ Mycp.cpp -o Mycp.o # 编译可执行文件为Mycp.p
./Mycp.o < inputfile > outputfile
```

在inputfile里输入一些字符，通过上面第二行的命令，我们就可以在outputfile里看到被复制的字符了。

## 何为Unix的标准输入输出？

说白了就是程序运行的时候，所有的shell给程序开放的输入输出接口

## C/C++版本

这里不严格区分C和C++。

```c
#include <iostream>
#include <stdio.h>

int main(void)
{
    int c;
    while ( (c = getc(stdin)) != EOF )
    {
        if (putc(c, stdout) == EOF)
            std::cout << "output error" << std::endl;
    }
    
    if (ferror(stdin))
        std::cout << "input error" << std::endl;
    
    return 0;
}
```

用法和之前的相同，因为都是用的Unix的标准输入输出。
