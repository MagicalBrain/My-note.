# 操作系统

## 1、进程管理

### 进程和线程有什么区别

### 进程通信和线程通信分别有哪些方式？为什么进程之间需要通信？能否举例实现？

#### 进程通信的方式有：

1. 管道通信(pipe)
   1. 匿名管道
   2. 命名管道
2. 消息队列
3. 信号量
4. 共享内存（或者说内存共享）

上述方法中效率最高的是？
共享内存

#### 进程通信的例子：

##### 匿名管道通信

```cpp
#include <unistd.h>

// pipe函数建立的管道是半双工
// 半双工即只能一个方向上进行数据传输的
int pipe(int pipefd[2]);

// socketpair函数建立的管道直接就可以实现全双工
// 全双工即数据可以在两个方向上进行数据传输。

// socketpair对两个文件描述符中的任何一个都可读出和写入管道，所以实现父子进程之间数据传输只需要一个管道。
// 而pipe是一个文件描述符pipefd[1]写入管道，一个文件描述符pipefd[0]读出管道，父子进程必须有一个关闭pipefd[0],另一个关闭pipefd[1],如果要实现父子进程之间的双向数据传输就要用两个管道。
```

```cpp
#include<stdio.h>
#include<unistd.h>
#include<stdlib.h>
#include<string.h>

int main()
{
    int _pipe[2]={0,0};
    int ret=pipe(_pipe); //创建管道

    if(ret == -1)
    {
        perror("create pipe error");
        return 1;
    }
    
    printf("_pipe[0] is %d,_pipe[1] is %d\n",_pipe[0],_pipe[1]);
    pid_t id = fork(); //父进程fork子进程
    
    if(id < 0)
    {
        perror("fork error");
        return 2;
    }
    else if(id == 0) //child,写
    {
        printf("child writing\n");
        close(_pipe[0]);
        int count=5;
        const char *msg="i am from XATU";
        
        while(count--)
        {
            write(_pipe[1],msg,strlen(msg));
            sleep(1);
        }
        close(_pipe[1]);
        exit(1);
    }
    else //father,读
    {
        printf("father reading\n");
        close(_pipe[1]);
        char msg[1024];
        int count=5;
        
        while(count--)
        {
            ssize_t s=read(_pipe[0],msg,sizeof(msg)-1);
            if(s > 0){
                msg[s]='\0';
                printf("client# %s\n",msg);
            }
            else{
                perror("read error");
                exit(1);
            }
        }
    
        if(waitpid(id,0,NULL) != -1){
            printf("wait success\n");
        }
    }
    return 0;
}
```

[浅析进程通信的几种方式和代码-逼乎大佬文章](https://zhuanlan.zhihu.com/p/94856678)

### 线程同步有哪些机制

### 内核线程和用户线程的区别

## 2、内存管理

### 内存管理有哪些机制

### 分段和分页的区别是？

### 什么是虚拟内存

### 什么是内存碎片，什么是内碎片，什么是外碎片？

### 虚拟地址、逻辑地址、线性地址、物理地址有什么区别

### Cache替换算法

## 3、用户编程接口


